#include <stdio.h>
#include <stdint.h>
#include <time.h>
#include "ntt.h"
#include "reduce.h"
#include "api.h"

#define LOOP 100

static const int32_t zetas_aligned[N] = {
    0, 25847, -2608894, -518909, 237124, 1826347, 2353451, -777960,
    -359251, -2091905, -876248, 3119733, -2884855, 466468, 3111497, 2680103,
    2725464, 2706023, 95776, 1024112, 3077325, 3530437, -1079900, -1661693,
    -3592148, 3585928, -2537516, 3915439, -549488, -3861115, -3043716, -1119584,
    3574422, -2867647, 2619752, 3539968, -300467, -2108549, 2348700, -539299,
    -2118186, -1699267, -1643818, -3859737, 3505694, -3821735, -1399561, 3507263,
    -2140649, -3277672, -1600420, 3699596, 1757237, 811944, 531354, -19422,
    954230, 3881043, 4010497, 3900724, -2556880, 280005, 2071892, -2797779,
    -3930395, 2091667, 3407706, -1528703, 2316500, 3817976, -3677745, -3342478,
    2244091, -3041255, -2446433, -3562462, -1452451, 266997, 2434439, 3475950,
    -1235728, 3513181, 2176455, -3520352, -3759364, -1585221, -1197226, -3193378,
    -1257611, 900702, 1859098, 1939314, 909542, 819034, -4083598, 495491,
    -1613174, -1000202, -43260, -522500, -3190144, -655327, -3122442, -3157330,
    2031748, 3207046, -3632928, -3556995, -525098, 126922, -768622, -3595838,
    3412210, 342297, 286988, -983419, -2437823, 4108315, 2147896, 3437287,
    -3342277, 2715295, 1735879, 203044, -2967645, 2842341, 2691481, -3693493,
    -2590150, 1265009, -411027, 4055324, 1247620, -2477047, 2486353, 1595974,
    -671102, -3767016, 1250494, -1228525, 2635921, -3548272, -22981, -2994039,
    1869119, -1308169, 1903435, -1050970, -381987, -1333058, 1237275, 1349076,
    -3318210, -1430225, 1852771, -451100, 1312455, -1430430, 3306115, -1962642,
    -3343383, -1279661, 1917081, 264944, -2546312, -1374803, 508951, 1500165,
    777191, 3097992, 2235880, 3406031, 44288, -542412, -2831860, -1100098,
    -1671176, -1846953, 904516, -2584293, -3724270, 3958618, 594136, -3776993,
    -3724342, -2013608, 2432395, -8578, 2454455, -164721, 1653064, 1957272,
    3369112, -3249728, 185531, -1207385, 2389356, -3183426, 162844, -210977,
    1616392, 3014001, 759969, 810149, 1652634, -1316856, -3694233, -1799107,
    189548, -3038916, 3523897, -3553272, 3866901, 269760, 3159746, 2213111,
    -975884, -1851402, 1717735, 472078, -2409325, -426683, 1723600, -177440,
    -1803090, 1910376, 1315589, -1667432, -1104333, 1341330, -260646, -3833893,
    1285669, -2939036, -2235985, -1584928, -420899, -2286327, -812732, 183443,
    -976891, -1439742, 1612842, -3545687, -3019102, -554416, 3919660, -3881060,
    -48306, -1362209, -3628969, 3937738, 1400424, 3839961, -846154, 1976782 
};


extern uint64_t getcycles();
      

int main() {
    clock_t start = 0, end = 0, cycle = 0;

    uint32_t a[N] = {0,};
    uint32_t b[N] = {0,};
    for(int i = 0; i < N; i++){
        a[i] = i;
        b[i] = i;
    }
            ntt(a);
            ntt(a);
            ntt(a);
            ntt(a);
            ntt(a);
            ntt(a);
            ntt(a);

    for(int i = 0; i < LOOP; i++){
        start = getcycles();
            ntt(a);
        end = getcycles();
        cycle += end - start;
    }


    // invntt_tomont_merged(a);
    // invntt_tomont(b);

    // printf("merged:\n");
    // for(int i = 0; i < N; i++){
    //     printf("%08x ", a[i]);
    //     if((i+1)%16 == 0){
    //         printf("\n");
    //     }
    // }printf("\n\n");

    // printf("pqclean:\n");
    // for(int i = 0; i < N; i++){
    //     printf("%08x ", b[i]);
    //     if((i+1)%16 == 0){
    //         printf("\n");
    //     }
    // }

    // for(int i = 0; i < LOOP; i++){
    //     start = getcycles();
    //     intt(a);
    //     end = getcycles();
    //     cycle += end - start;
    // }

    printf("sign cc: %d\n", cycle / LOOP);
    printf("dummy\n");
    printf("dummy\n");
    printf("dummy\n");
    printf("dummy\n");

    // srai, snez, lui -> 3cc


    return 0;

}